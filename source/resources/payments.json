{"openapi":"3.0.1","info":{"title":"Digiteal API","contact":{"email":"email"},"version":"1.0.0"},"servers":[{"url":"test.digiteal.eu","description":"Test environment"}],"security":[{"basic":[]}],"paths":{"/api/v1/payment-cards/token/reserve":{"post":{"tags":["Card Token"],"summary":"Reserve funds","description":"Check funds availability and reserve funds on the debtor card.","operationId":"reserveFunds","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentCardTokenReserveFundsRequest"}}},"required":true},"responses":{"200":{"description":"reservation completed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentCardTokenReserveFundsResponse"}}}}}}},"/api/v1/payment-cards/token/pkey":{"post":{"tags":["Card Token"],"summary":"Create token","description":"Store card information into a permanent token.","operationId":"createTokenFromPkey","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentCardTokenCreationRequest"}}},"required":true},"responses":{"200":{"description":"token creation requested","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentCardCreationTokenResponse"}}}}}}},"/api/v1/payment-cards/token/pay":{"post":{"tags":["Card Token"],"summary":"Initiate Payment","description":"Charge funds from a previously made reservation. Uncharged funds will be released.","operationId":"processPayment","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentCardTokenProcessPaymentRequest"}}},"required":true},"responses":{"200":{"description":"payment processed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentCardTokenProcessPaymentResponse"}}}}}}},"/api/v1/payment-cards/token/cancel":{"post":{"tags":["Card Token"],"summary":"Cancel reservation","description":"Release funds from a previously made reservation.","operationId":"cancelReservation","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentCardTokenCancelReservationRequest"}}},"required":true},"responses":{"200":{"description":"reservation cancelled","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentCardTokenCancelReservationResponse"}}}}}}}},"components":{"schemas":{"PaymentCardTokenReserveFundsResponse":{"required":["successful"],"type":"object","properties":{"successful":{"type":"boolean","description":"The reservation is successful if the funds are available and could be reserved on the card.","example":true},"reservationId":{"type":"string","description":"The unique id of the reservation.\nSet only if the reservation is successful.","example":"uuid"},"errorCode":{"type":"string","description":"Reason code to the reservation failure.\nSet only if the reservation is not successful.","example":"code"},"errorMessage":{"type":"string","description":"Reason message to the reservation failure.\nSet only if the reservation is not successful.","example":"message"}}},"PaymentCardTokenReserveFundsRequest":{"required":["amountInCents","companyIdentificationNumber","token"],"type":"object","properties":{"companyIdentificationNumber":{"type":"string","description":"Creditor of the transaction.\nThe company must be registered on Digiteal and link to your integrator account.\n[Format](https://docs.digiteal.eu/technical/index.html#company_national_identifiers)","example":"BE:VAT:1111"},"token":{"maxLength":255,"minLength":0,"type":"string","description":"Permanent token generated by Digiteal.","example":"abcd"},"amountInCents":{"minimum":0,"type":"number","description":"Amount to be reserved on the card.","example":100}}},"PaymentCardCreationTokenResponse":{"type":"object","properties":{"3dsRedirectUrl":{"type":"string","description":"Url to redirect to the 3DS challenge web page if a challenge is requested by the acquirer.","format":"url","example":"https://redirecturl.com"}}},"Config3ds":{"required":["fingerPrintStatus","language","redirectUrl"],"type":"object","properties":{"redirectUrl":{"maxLength":255,"minLength":0,"type":"string","description":"Url to be redirected to after 3DS challenge completion.","format":"uri","example":"https://redirecturl.com"},"language":{"type":"string","description":"Language to use on 3DS challenge web page.","format":"bcp-47","example":"fr-FR"},"fingerPrintStatus":{"type":"string","description":"Status on the fingerprint request at PKey creation.","example":"NOT_REQUIRED","enum":["NOT_REQUIRED","REQUIRED_ASKED","REQUIRED_NOT_ASKED"]}},"description":"3D secure configuration"},"Customer":{"type":"object","properties":{"name":{"maxLength":255,"minLength":0,"type":"string","description":"Card holder full name. Should contains first and last name of the card holder.\nThis field is required if this information was not provided at PKey creation.","example":"John Doe"},"emailAddress":{"maxLength":255,"minLength":0,"type":"string","description":"Card holder email.","format":"email","example":"john@doe.com"},"streetName":{"maxLength":255,"minLength":0,"type":"string","description":"Card holder address street name.","example":"Rue Email Francqui"},"streetNumber":{"maxLength":255,"minLength":0,"type":"string","description":"Card holder address street number.","example":"6"},"city":{"maxLength":255,"minLength":0,"type":"string","description":"Card holder address city name.","example":"Mont-Saint-Guibert"},"countryCode":{"type":"string","description":"Card holder address country code.","format":"iso-3166-2","example":"BE"},"ipAddress":{"maxLength":255,"minLength":0,"type":"string","description":"Card holder ip address.","format":"ipv4","example":"1.1.1.1"}},"description":"Card holder information."},"PaymentCardTokenCreationRequest":{"required":["3dsConfig","companyIdentificationNumber","customerInternalId","notificationUrl","tokenProviderKey"],"type":"object","properties":{"companyIdentificationNumber":{"type":"string","description":"The creditor of the transaction.\nThe company must be registered on Digiteal and link to your integrator account.\n[Format](https://docs.digiteal.eu/technical/index.html#company_national_identifiers)","example":"BE:VAT:1111"},"tokenProviderKey":{"maxLength":255,"minLength":0,"type":"string","description":"PKey (temporary token) generated by a Token Service Provider.","example":"abcd"},"customerInternalId":{"maxLength":255,"minLength":0,"type":"string","description":"Identification used for your reference. This value will be returned in the notification call.","example":"1234"},"notificationUrl":{"maxLength":255,"minLength":0,"type":"string","description":"Url used to make asynchronous call with the token information. [Notifications](https://digiteal.readme.io/docs#notification)","format":"uri","example":"https://notification.com"},"customer":{"$ref":"#/components/schemas/Customer"},"3dsConfig":{"$ref":"#/components/schemas/Config3ds"}}},"PaymentCardTokenProcessPaymentResponse":{"required":["successful"],"type":"object","properties":{"successful":{"type":"boolean","description":"The payment initiation is successful if the funds are properly charged.","example":true},"paymentId":{"type":"string","description":"The unique id of the payment.\nSet only if the payment initiation is successful.","format":"uuid"},"errorCode":{"type":"string","description":"Reason code to the reservation failure.\nSet only if the payment initiation is not successful.","example":"code"},"errorMessage":{"type":"string","description":"Reason message to the reservation failure.\nSet only if the payment initiation is not successful.","example":"message"}}},"PaymentCardTokenProcessPaymentRequest":{"required":["amountInCents","companyIdentificationNumber","reservationId","token"],"type":"object","properties":{"companyIdentificationNumber":{"type":"string","description":"The creditor of the transaction.\nThe company must be registered on Digiteal and link to your integrator account.\n[Format](https://docs.digiteal.eu/technical/index.html#company_national_identifiers)","example":"BE:VAT:1111"},"token":{"maxLength":255,"minLength":0,"type":"string","description":"Permanent token generated by Digiteal.","example":"abcd"},"reservationId":{"type":"string","description":"Identification of the reservation to use.","example":"uuid"},"amountInCents":{"minimum":0,"type":"number","description":"Amount to be charged on the reserved funds.","example":100}}},"PaymentCardTokenCancelReservationResponse":{"required":["successful"],"type":"object","properties":{"successful":{"type":"boolean","description":"The cancellation is successful if the funds are properly released.","example":true},"errorCode":{"type":"string","description":"Reason code to the reservation failure.\nSet only if the cancellation is not successful.","example":"code"},"errorMessage":{"type":"string","description":"Reason message to the reservation failure.\nSet only if the cancellation is not successful.","example":"message"}}},"PaymentCardTokenCancelReservationRequest":{"required":["companyIdentificationNumber","reservationId","token"],"type":"object","properties":{"companyIdentificationNumber":{"type":"string","description":"The creditor of the transaction.\nThe company must be registered on Digiteal and link to your integrator account.\n[Format](https://docs.digiteal.eu/technical/index.html#company_national_identifiers)","example":"BE:VAT:1111"},"token":{"maxLength":255,"minLength":0,"type":"string","description":"Permanent token generated by Digiteal.","example":"abcd"},"reservationId":{"type":"string","description":"Identification of the reservation to cancel.","example":"uuid"}}}},"securitySchemes":{"basic":{"type":"http","scheme":"basic"}}}}